{"version":3,"sources":["app/recipes/views/recipe_image.cljs"],"sourcesContent":["(ns app.recipes.views.recipe-image\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [app.components.form-group :refer [form-group]]\n            [app.components.modal :refer [modal]]\n            [\"@smooth-ui/core-sc\" :refer [Box Button Typography\n                                          Modal ModalContent ModalDialog ModalBody ModalFooter]]))\n\n(defn recipe-image\n  []\n  (let [initial-values {:img \"\"}\n        values (r/atom initial-values)\n        {:keys [img name]} @(rf/subscribe [:recipe])\n        author? (rf/subscribe [:author?])\n        open-modal (fn [{:keys [modal-name recipe]}]\n                     (rf/dispatch [:open-modal modal-name])\n                     (reset! values recipe))\n        save (fn [img]\n               (rf/dispatch [:upsert-image img])\n               (reset! values initial-values))]\n\n    (fn []\n      [:<>\n       [:> Box {:class (when author? \"editable\")\n                :background-image (str \"url(\" (or img \"/img/placeholder.jpg\") \")\")\n                :background-size \"cover\"\n                :min-height \"400px\"\n                :border-radius 10\n                :alt name\n                :on-click (when author? #(open-modal {:modal-name :image-editor\n                                                      :recipe {:img img}}))}]\n       (when author?\n         [modal {:modal-name :image-editor\n                 :header \"Image\"\n                 :body [form-group {:id :img\n                                    :label \"URL\"\n                                    :type \"text\"\n                                    :values values}]\n                 :footer [:<>\n                          [:> Button {:on-click #(rf/dispatch [:close-modal])\n                                      :variant \"light\"}\n                           \"Cancel\"]\n                          [:> Button {:on-click #(save @values)}\n                           \"Save\"]]}])])))\n"],"mappings":";;;;;;;AAQA,AAAA,AAAMA;AAAN,AAEE,AAAA,AAAA,AAAA,AAAMO;AACAC,AAAO,AAACC,AAAOF;AADrBN,AAAA,AAAAC,AAE0B,AAAAU,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACC,AAAAA,AAAAA;;AAF3BZ,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAE,AAAA,AAAAF,AAAA,AAAA,AAAA,AAAA,AAAAG,AAAAC,AAAAJ,AAAAA;AAAA,AAAAK,AAAAL,AAAA,AAEcS;AAFd,AAAAJ,AAAAL,AAAA,AAEkBU;AACZG,AAAQ,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACF,AAAAA,AAAAA;;AACTG,AAAW;AAAAC;AAAA,AAAA,AAAAC,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAf,AAAA,AAAAe,AAAA,AAAA,AAAA,AAAA,AAAAd,AAAAC,AAAAa,AAAAA;AAAA,AAAAZ,AAAAY,AAAA,AAAaC;AAAb,AAAAb,AAAAY,AAAA,AAAwBE;AAAxB,AACE,AAAAC,AAAA,AAAA,AAA0BF;AAA1B,AAAA,AAAAE,AAAAA,AAACC,AAAAA,AAAAA;;AACD,AAACC,AAAOf,AAAOY;;;AAC5BI,AAAK;AAAKd;AAAL,AACE,AAAAe,AAAA,AAAA,AAA4Bf;AAA5B,AAAA,AAAAe,AAAAA,AAACH,AAAAA,AAAAA;;AACD,AAACC,AAAOf,AAAOD;;;AAT5B,AAWE;;AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEOmB,AAAY,AAAA,AAAA,AAAA,AAAMZ,AACK,AAAA,AAAY,AAAAa,AAAIjB;AAAJ,AAAA,AAAAiB;AAAAA;;AAAA;;AAH1C,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAG8B,AAIbhB,AACK,AAAA,AAAA,AAAMG;;AAAN,AAAe,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACE,AAC0BN;;AAD1C,AAEnB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAMI,AACHc,AAEcC,AAGoBrB,AAEdsB;;AARvB,AAQ0C,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACT,AAAAA,AAAAA;;AAR3C,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAWuBQ;;AAXvB,AAW0C,AAAA,AAAA5B,AAACsB,AAAMhB;;AAXjD,AAAA","names":["app.recipes.views.recipe-image/recipe-image","map__26103","cljs.core/deref","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","initial-values","values","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","img","name","G__26104","re-frame.core/subscribe","author?","G__26110","open-modal","p__26111","map__26114","modal-name","recipe","G__26116","re-frame.core/dispatch","cljs.core/reset!","save","G__26117","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Box","or__4131__auto__","app.components.modal/modal","app.components.form-group/form-group","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Button","G__26118"]}