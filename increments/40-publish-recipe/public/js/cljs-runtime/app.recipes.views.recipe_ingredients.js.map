{"version":3,"sources":["app/recipes/views/recipe_ingredients.cljs"],"sourcesContent":["(ns app.recipes.views.recipe-ingredients\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [clojure.string :as str]\n            [app.components.modal :refer [modal]]\n            [app.components.form-group :refer [form-group]]\n            [\"@smooth-ui/core-sc\" :refer [Box Typography Row Col Button]]\n            [\"styled-icons/fa-solid/Plus\" :refer [Plus]]))\n\n(defn recipe-ingredients\n  []\n  (let [initial-values {:id nil :amount \"\" :measure \"\" :name \"\"}\n        values (r/atom initial-values)\n        open-modal (fn [{:keys [modal-name ingredient]}]\n                     (rf/dispatch [:open-modal modal-name])\n                     (reset! values ingredient))\n        save (fn [{:keys [id amount measure name]}]\n               (rf/dispatch [:upsert-ingredient {:id (or id (keyword (str \"ingredient-\" (random-uuid))))\n                                                 :name (str/trim name)\n                                                 :amount (js/parseInt amount)\n                                                 :measure (str/trim measure)}])\n               (reset! values initial-values))]\n\n    (fn []\n      (let [ingredients @(rf/subscribe [:ingredients])\n            author? @(rf/subscribe [:author?])]\n        [:> Box {:background-color \"white\"\n                 :border-radius 10\n                 :p 2\n                 :pt 0}\n         [:> Box {:display \"flex\"\n                  :justify-content \"flex-start\"}\n          [:> Box\n           [:> Typography {:variant \"h5\"\n                           :py 15\n                           :m 0}\n            \"Ingredients\"]]\n          [:> Box {:my 15\n                   :pl 10}\n           [:> Button {:variant \"light\"\n                       :size \"sm\"\n                       :on-click #(open-modal {:modal-name :ingredient-editor\n                                               :ingredient initial-values})}\n            [:> Plus {:size 12}]]]]\n         [:> Box\n          (for [{:keys [id amount measure name] :as ingredient}  ingredients]\n            ^{:key id}\n            [:> Box {:py 10}\n             [:> Row (when author?\n                       {:on-click #(open-modal {:modal-name :ingredient-editor\n                                                :ingredient ingredient})\n                        :class \"editable\"})\n              [:> Col {:xs 3}\n               amount \" \" measure]\n              [:> Col\n               name]]])\n          (when author?\n            [modal {:modal-name :ingredient-editor\n                    :header \"Ingredient\"\n                    :body [:<>\n                           [:> Row\n                            [:> Col\n                             [form-group {:id :amount\n                                          :label \"Amount\"\n                                          :type \"number\"\n                                          :values values}]]\n                            [:> Col\n                             [form-group {:id :measure\n                                          :label \"Measure\"\n                                          :type \"text\"\n                                          :values values}]]]\n                           [form-group {:id :name\n                                        :label \"Name\"\n                                        :type \"text\"\n                                        :values values}]]\n                    :footer [:<>\n                             (when-let [ingredient-id (:id @values)]\n                               [:a {:href \"#\"\n                                    :on-click #(when (js/confirm \"Are you sure?\")\n                                                 (rf/dispatch [:delete-ingredient ingredient-id]))}\n                                \"Delete\"])\n                             [:> Button {:variant \"light\"\n                                         :mx 10\n                                         :on-click #(rf/dispatch [:close-modal])}\n                              \"Cancel\"]\n                             [:> Button {:on-click #(save @values)}\n                              \"Save\"]]}])]]))))\n"],"mappings":"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","names":["app.recipes.views.recipe-ingredients/recipe-ingredients","initial-values","values","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","open-modal","p__26125","map__26126","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","modal-name","ingredient","G__26128","re-frame.core/dispatch","cljs.core/reset!","save","p__26129","map__26130","id","amount","measure","name","G__26136","or__4131__auto__","cljs.core.keyword.cljs$core$IFn$_invoke$arity$1","cljs.core/random-uuid","clojure.string/trim","js/parseInt","cljs.core/deref","ingredients","G__26140","re-frame.core/subscribe","author?","G__26141","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Box","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Typography","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Button","js/module$node_modules$styled_icons$fa_solid$Plus.Plus","iter__4523__auto__","s__26143","cljs.core/LazySeq","temp__5457__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4521__auto__","size__4522__auto__","cljs.core/count","b__26145","cljs.core/chunk-buffer","i__26144","map__26150","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__26142","cljs.core/chunk-rest","map__26162","cljs.core/first","cljs.core/cons","cljs.core/rest","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Row","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Col","app.components.modal/modal","app.components.form-group/form-group","ingredient-id","js/confirm","G__26176","G__26177","cljs.core/chunk-first"]}