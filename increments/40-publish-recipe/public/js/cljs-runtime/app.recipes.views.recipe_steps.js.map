{"version":3,"sources":["app/recipes/views/recipe_steps.cljs"],"sourcesContent":["(ns app.recipes.views.recipe-steps\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [clojure.string :as str]\n            [app.components.modal :refer [modal]]\n            [app.components.form-group :refer [form-group]]\n            [\"@smooth-ui/core-sc\" :refer [Box Typography Row Col Button]]\n            [\"styled-icons/fa-solid/Plus\" :refer [Plus]]))\n\n(defn recipe-steps\n  []\n  (let [initial-values {:id nil :desc \"\"}\n        values (r/atom initial-values)\n        open-modal (fn [{:keys [modal-name step]}]\n                     (rf/dispatch [:open-modal modal-name])\n                     (reset! values step))\n        save (fn [{:keys [id desc]}]\n               (rf/dispatch [:upsert-step {:id (or id (keyword (str \"step-\" (random-uuid))))\n                                           :desc (str/trim desc)}])\n               (reset! values initial-values))]\n\n    (fn []\n      (let [steps @(rf/subscribe [:steps])\n            author? @(rf/subscribe [:author?])]\n        [:> Box {:background-color \"white\"\n                 :border-radius 10\n                 :p 2\n                 :pt 0}\n         [:> Box {:display \"flex\"\n                  :justify-content \"flex-start\"}\n          [:> Box\n           [:> Typography {:variant \"h5\"\n                           :py 15\n                           :m 0}\n            \"Steps\"]]\n          [:> Box {:my 15\n                   :pl 10}\n           [:> Button {:variant \"light\"\n                       :size \"sm\"\n                       :on-click #(open-modal {:modal-name :step-editor\n                                               :step initial-values})}\n            [:> Plus {:size 12}]]]]\n         [:> Box\n          (for [{:keys [id desc] :as step} steps]\n            ^{:key id}\n            [:> Box {:py 10}\n             [:> Row (when author?\n                       {:on-click #(open-modal {:modal-name :step-editor\n                                                :step step})\n                        :class \"editable\"})\n              [:> Col {:py 10}\n               desc]]])\n          (when author?\n            [modal {:modal-name :step-editor\n                    :header \"Step\"\n                    :body [:<>\n                           [form-group {:id :desc\n                                        :label \"Description\"\n                                        :type \"text\"\n                                        :values values\n                                        :textarea true}]]\n                    :footer [:<>\n                             (when-let [step-id (:id @values)]\n                               [:a {:href \"#\"\n                                    :on-click #(when (js/confirm \"Are you sure?\")\n                                                 (rf/dispatch [:delete-step step-id]))}\n                                \"Delete\"])\n                             [:> Button {:variant \"light\"\n                                         :mx 10\n                                         :on-click #(rf/dispatch [:close-modal])}\n                              \"Cancel\"]\n                             [:> Button {:on-click #(save @values)}\n                              \"Save\"]]}])]]))))\n"],"mappings":"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","names":["app.recipes.views.recipe-steps/recipe-steps","initial-values","values","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","open-modal","p__26146","map__26147","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","modal-name","step","G__26154","re-frame.core/dispatch","cljs.core/reset!","save","p__26156","map__26157","id","desc","G__26161","or__4131__auto__","cljs.core.keyword.cljs$core$IFn$_invoke$arity$1","cljs.core/random-uuid","clojure.string/trim","cljs.core/deref","steps","G__26166","re-frame.core/subscribe","author?","G__26169","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Box","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Typography","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Button","js/module$node_modules$styled_icons$fa_solid$Plus.Plus","iter__4523__auto__","s__26171","cljs.core/LazySeq","temp__5457__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4521__auto__","size__4522__auto__","cljs.core/count","b__26173","cljs.core/chunk-buffer","i__26172","map__26190","cljs.core._nth.cljs$core$IFn$_invoke$arity$2","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__26170","cljs.core/chunk-rest","map__26192","cljs.core/first","cljs.core/cons","cljs.core/rest","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Row","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Col","app.components.modal/modal","app.components.form-group/form-group","step-id","js/confirm","G__26194","G__26196","cljs.core/chunk-first"]}