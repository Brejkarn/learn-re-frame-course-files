shadow$provide.module$node_modules$react_clientside_effect$lib$index=function(global,process,require,module,exports,shadow$shims){function _interopDefault(ex){return ex&&"object"===typeof ex&&"default"in ex?ex["default"]:ex}var _inheritsLoose=_interopDefault(require("module$node_modules$$babel$runtime$helpers$inheritsLoose")),_defineProperty=_interopDefault(require("module$node_modules$$babel$runtime$helpers$defineProperty")),React=require("module$node_modules$react$index"),React__default=_interopDefault(React),
shallowEqual=_interopDefault(require("module$node_modules$shallowequal$index"));module.exports=function(reducePropsToState,handleStateChangeOnClient){if("function"!==typeof reducePropsToState)throw Error("Expected reducePropsToState to be a function.");if("function"!==typeof handleStateChangeOnClient)throw Error("Expected handleStateChangeOnClient to be a function.");return function(WrappedComponent){function emitChange(){state=reducePropsToState(mountedInstances.map(function(instance){return instance.props}));
handleStateChangeOnClient(state)}if("function"!==typeof WrappedComponent)throw Error("Expected WrappedComponent to be a React component.");var mountedInstances=[],state,SideEffect=function(_Component){function SideEffect(){return _Component.apply(this,arguments)||this}_inheritsLoose(SideEffect,_Component);SideEffect.peek=function(){return state};var _proto=SideEffect.prototype;_proto.shouldComponentUpdate=function(nextProps){return!shallowEqual(nextProps,this.props)};_proto.componentDidMount=function(){mountedInstances.push(this);
emitChange()};_proto.componentDidUpdate=function(){emitChange()};_proto.componentWillUnmount=function(){var index=mountedInstances.indexOf(this);mountedInstances.splice(index,1);emitChange()};_proto.render=function(){return React__default.createElement(WrappedComponent,this.props)};return SideEffect}(React.Component);_defineProperty(SideEffect,"displayName","SideEffect("+(WrappedComponent.displayName||WrappedComponent.name||"Component")+")");return SideEffect}}}
//# sourceMappingURL=module$node_modules$react_clientside_effect$lib$index.js.map
