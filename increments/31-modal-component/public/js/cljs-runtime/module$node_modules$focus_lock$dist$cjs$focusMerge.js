shadow$provide.module$node_modules$focus_lock$dist$cjs$focusMerge=function(global,process,require,module,exports,shadow$shims){Object.defineProperty(exports,"__esModule",{value:!0});exports.newFocus=void 0;var _DOMutils=require("module$node_modules$focus_lock$dist$cjs$utils$DOMutils"),_firstFocus2=(global=require("module$node_modules$focus_lock$dist$cjs$utils$firstFocus"))&&global.__esModule?global:{default:global},_allAffected2=(require=require("module$node_modules$focus_lock$dist$cjs$utils$all_affected"))&&
require.__esModule?require:{default:require},findAutoFocused=function(autoFocusables){return function(node){return!!node.autofocus||node.dataset&&!!node.dataset.autofocus||0<=autoFocusables.indexOf(node)}},newFocus=exports.newFocus=function(innerNodes,outerNodes,activeElement,lastNode,autoFocused){var cnt=innerNodes.length,firstFocus=innerNodes[0],lastFocus=innerNodes[cnt-1];if(!(0<=innerNodes.indexOf(activeElement))){activeElement=outerNodes.indexOf(activeElement);var lastIndex=outerNodes.indexOf(lastNode||
activeElement);lastNode=innerNodes.indexOf(lastNode);lastIndex=activeElement-lastIndex;firstFocus=outerNodes.indexOf(firstFocus);outerNodes=outerNodes.indexOf(lastFocus);if(-1===activeElement||-1===lastNode)return innerNodes.indexOf(autoFocused.length?(0,_firstFocus2.default)(autoFocused):(0,_firstFocus2.default)(innerNodes));if(!lastIndex&&0<=lastNode||lastIndex&&1<Math.abs(lastIndex))return lastNode;if(activeElement<=firstFocus)return cnt-1;if(activeElement>outerNodes)return 0;if(lastIndex)return 1<
Math.abs(lastIndex)?lastNode:(cnt+lastNode+lastIndex)%cnt}},getTopCommonParent=function(activeElement,entry,entries){var topCommon=entry;entries.forEach(function(subEntry){(subEntry=(0,_DOMutils.getCommonParent)(activeElement,subEntry))&&(topCommon=subEntry.contains(topCommon)?subEntry:(0,_DOMutils.getCommonParent)(subEntry,topCommon))});return topCommon},allParentAutofocusables=function(entries){return entries.reduce(function(acc,node){return acc.concat((0,_DOMutils.parentAutofocusables)(node))},
[])},notAGuard=function(node){return!(node.dataset&&node.dataset.focusGuard)};exports.default=function(topNode,lastNode){var activeElement=document&&document.activeElement,entries=(0,_allAffected2.default)(topNode).filter(notAGuard),commonParent=getTopCommonParent(activeElement||topNode,topNode,entries);topNode=(0,_DOMutils.getTabbableNodes)(entries).filter(function(_ref){return notAGuard(_ref.node)});if(!topNode[0]&&(topNode=(0,_DOMutils.getAllTabbableNodes)(entries).filter(function(_ref2){return notAGuard(_ref2.node)}),
!topNode[0]))return;var innerNodes=topNode.map(function(_ref3){return _ref3.node});commonParent=(0,_DOMutils.getTabbableNodes)([commonParent]).map(function(_ref4){return _ref4.node});lastNode=newFocus(innerNodes,commonParent,activeElement,lastNode,innerNodes.filter(findAutoFocused(allParentAutofocusables(entries))));return void 0===lastNode?lastNode:topNode[lastNode]}}
//# sourceMappingURL=module$node_modules$focus_lock$dist$cjs$focusMerge.js.map
