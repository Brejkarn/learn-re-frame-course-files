{"version":3,"sources":["app/recipes/views/recipe_image.cljs"],"sourcesContent":["(ns app.recipes.views.recipe-image\n  (:require [re-frame.core :as rf]\n            [reagent.core :as r]\n            [app.components.form-group :refer [form-group]]\n            [\"@smooth-ui/core-sc\" :refer [Box Button Typography\n                                          Modal ModalContent ModalDialog ModalBody ModalFooter]]))\n\n(defn recipe-image\n  []\n  (let [initial-values {:img \"\"}\n        values (r/atom initial-values)\n        {:keys [img name]} @(rf/subscribe [:recipe])\n        author? (rf/subscribe [:author?])\n        open-modal (fn [{:keys [modal-name recipe]}]\n                     (rf/dispatch [:open-modal modal-name])\n                     (reset! values recipe))\n        save (fn [img]\n               (rf/dispatch [:upsert-image img])\n               (reset! values initial-values))]\n\n    (fn []\n      (let [active-modal @(rf/subscribe [:active-modal])]\n        [:<>\n         [:> Box {:class (when author? \"editable\")\n                  :background-image (str \"url(\" (or img \"/img/placeholder.jpg\") \")\")\n                  :background-size \"cover\"\n                  :min-height \"400px\"\n                  :border-radius 10\n                  :alt name\n                  :on-click (when author? #(open-modal {:modal-name :image-editor\n                                                        :recipe {:img img}}))}]\n         (when author?\n           [:> Modal {:opened (= active-modal :image-editor)\n                      :on-close #(rf/dispatch [:close-modal])}\n            [:> ModalDialog\n             [:> ModalContent {:border-radius 10}\n              [:> Typography {:p 15\n                              :variant \"h4\"}\n               \"Image\"]\n              [:> ModalBody\n               [form-group {:id :img\n                            :label \"URL\"\n                            :type \"text\"\n                            :values values}]]\n              [:> ModalFooter\n               [:<>\n                [:> Button {:on-click #(rf/dispatch [:close-modal])\n                            :variant \"light\"}\n                 \"Cancel\"]\n                [:> Button {:on-click #(save @values)}\n                 \"Save\"]]]]]])]))))\n"],"mappings":";;;;;;AAOA,AAAA,AAAMA;AAAN,AAEE,AAAA,AAAA,AAAA,AAAMO;AACAC,AAAO,AAACC,AAAOF;AADrBN,AAAA,AAAAC,AAE0B,AAAAU,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACC,AAAAA,AAAAA;;AAF3BZ,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAE,AAAA,AAAAF,AAAA,AAAA,AAAA,AAAA,AAAAG,AAAAC,AAAAJ,AAAAA;AAAA,AAAAK,AAAAL,AAAA,AAEcS;AAFd,AAAAJ,AAAAL,AAAA,AAEkBU;AACZG,AAAQ,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACF,AAAAA,AAAAA;;AACTG,AAAW;AAAAC;AAAA,AAAA,AAAAC,AAAAD;AAAAC,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAf,AAAA,AAAAe,AAAA,AAAA,AAAA,AAAA,AAAAd,AAAAC,AAAAa,AAAAA;AAAA,AAAAZ,AAAAY,AAAA,AAAaC;AAAb,AAAAb,AAAAY,AAAA,AAAwBE;AAAxB,AACE,AAAAC,AAAA,AAAA,AAA0BF;AAA1B,AAAA,AAAAE,AAAAA,AAACC,AAAAA,AAAAA;;AACD,AAACC,AAAOf,AAAOY;;;AAC5BI,AAAK;AAAKd;AAAL,AACE,AAAAe,AAAA,AAAA,AAA4Bf;AAA5B,AAAA,AAAAe,AAAAA,AAACH,AAAAA,AAAAA;;AACD,AAACC,AAAOf,AAAOD;;;AAT5B,AAWE;;AAAA,AACE,AAAA,AAAAL,AAAMwB,AAAc,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACd,AAAAA,AAAAA;;AAArB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAEOe,AAAY,AAAA,AAAA,AAAA,AAAMd,AACK,AAAA,AAAY,AAAAe,AAAInB;AAAJ,AAAA,AAAAmB;AAAAA;;AAAA;;AAH1C,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAG8B,AAIblB,AACK,AAAA,AAAA,AAAMG;;AAAN,AAAe,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAACE,AAC0BN;;AAD1C,AAEnB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAMI,AACAgB,AAAe,AAAA,AAACC,AAAEL;;AADxB,AAEwB,AAAAM,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAACV,AAAAA,AAAAA;;AAFzB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAGOW,AACCC,AACCC,AAGAC,AACFC,AAGoB7B,AAClB8B,AAEEC;;AAfX,AAe8B,AAAAC,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAAA,AAAClB,AAAAA,AAAAA;;AAf/B,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAkBWiB;;AAlBX,AAkB8B,AAAA,AAAArC,AAACsB,AAAMhB;;AAlBrC,AAAA","names":["app.recipes.views.recipe-image/recipe-image","map__26179","cljs.core/deref","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply.cljs$core$IFn$_invoke$arity$2","cljs.core/hash-map","cljs.core.get.cljs$core$IFn$_invoke$arity$2","initial-values","values","reagent.core.atom.cljs$core$IFn$_invoke$arity$1","img","name","G__26180","re-frame.core/subscribe","author?","G__26182","open-modal","p__26183","map__26184","modal-name","recipe","G__26186","re-frame.core/dispatch","cljs.core/reset!","save","G__26187","active-modal","G__26188","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Box","or__4131__auto__","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Modal","cljs.core._EQ_.cljs$core$IFn$_invoke$arity$2","G__26189","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.ModalDialog","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.ModalContent","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Typography","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.ModalBody","app.components.form-group/form-group","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.ModalFooter","js/module$node_modules$$smooth_ui$core_sc$dist$smooth_ui_core_sc_cjs.Button","G__26190"]}